!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AppFrameworkSDK=t():e.AppFrameworkSDK=t()}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReferences=t.includeReference=t.includeSchema=t.includeContentType=t.includeOwner=t.environment=t.language=t.addQuery=t.addParam=t._type=t.mergeDeep=t.merge=t.transform=void 0,t.transform=function(e){return function(){switch(this._query[e]=this._query[e]||{},arguments.length){case 1:if(Array.isArray(arguments[0])||"string"==typeof arguments[0])return t=(t=this._query[e].BASE||[]).concat(arguments[0]),this._query[e].BASE=t,this;throw Error("Kindly provide valid parameters");case 2:var t;if("string"==typeof arguments[0]&&(Array.isArray(arguments[1])||"string"==typeof arguments[1]))return t=(t=this._query[e][arguments[0]]||[]).concat(arguments[1]),this._query[e][arguments[0]]=t,this;throw Error("Kindly provide valid parameters");default:throw Error("Kindly provide valid parameters")}}},t.merge=function(e,t){var n=e;return e&&t&&Object.keys(t).forEach((function(e){n[e]=t[e]})),n},t.mergeDeep=function(e,t){var n=e,r=this,o=function(e,t){var n=e;Object.keys(t).forEach((function(e){"object"===r._type(t[e])&&r._type(n[e])===r._type(t[e])?o(n[e],t[e]):"array"===r._type(t[e])&&r._type(n[e])===r._type(t[e])?n[e]=n[e].concat(t[e]):n[e]=t[e]}))};return o(n,t),n},t._type=function(e){var t=typeof e;return"object"===t&&Array.isArray(e)&&(t="array"),t},t.addParam=function(e,t){if(e&&"string"==typeof e&&t&&"string"==typeof t)return this._query[e]=t,this;throw Error("Kindly provide valid parameters.")},t.addQuery=function(e,t){if(e&&t&&"string"==typeof e)return this._query[e]=t,this;throw Error("First argument should be a String.")},t.language=function(e){if(e&&"string"==typeof e)return this._query.locale=e,this;throw Error("Argument should be a String.")},t.environment=function(e){if(e&&"string"==typeof e)return this._query.environment=e,this;throw Error("Argument should be a String.")},t.includeOwner=function(){return this._query.include_owner=!0,this},t.includeContentType=function(){return this._query.include_content_type=!0,this},t.includeSchema=function(){return this._query.include_schema=!0,this},t.includeReference=function(e){if(Array.isArray(e))for(var t=0;t<e.length;t+=1)this._query["include[]"]=this._query["include[]"]||[],this._query["include[]"]=this._query["include[]"].concat(e[t]);else{if("string"!=typeof e)throw Error("Argument should be a String or an Array.");for(t=0;t<arguments.length;t+=1)this._query["include[]"]=this._query["include[]"]||[],this._query["include[]"]=this._query["include[]"].concat(arguments[t])}return this},t.getReferences=function(){return this.fetch("get"+this.constructor.module()+"References")}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(10)),i=n(0);function a(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function s(e){return Promise.reject(e)}var u=function(){function e(e){if(!e)throw new Error("uid is required");this.uid=e,this._query={},this.only=i.transform("only"),this.except=i.transform("except"),this.addParam=i.addParam}return e.Query=function(){return new o.default(this.connection,this.module(!0),this.contentTypeUid)},e.create=function(e){var t={payload:e,content_type_uid:this.contentTypeUid,action:"create"+this.module()};return this.connection.sendToParent("stackQuery",t).then(a).catch(s)},e.prototype.update=function(e){return!e||"object"!=typeof e||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):this.fetch("update"+this.constructor.module(),e)},e.prototype.delete=function(){return this.fetch("delete"+this.constructor.module())},e.prototype.fetch=function(e,t){var n={payload:t,content_type_uid:this.constructor.contentTypeUid,uid:this.uid,params:this._query,action:e||"get"+this.constructor.module()};return t||delete n.payload,this.constructor.contentTypeUid||delete n.content_type_uid,this.constructor.connection.sendToParent("stackQuery",n).then(a).catch(s)},e}();t.default=u},function(e,t,n){e.exports=n(6),e.exports.default=e.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["file","reference","blocks","group","global_field"];var o=function(){function e(e,t,n){this.uid=e.data.uid,this.data_type=e.data.schema.data_type,this.schema=e.data.schema,this._emitter=n;var r,o,i,a,s=(r=this,o=e.data.value,i=o,a=o,"file"===r.data_type&&(o?(i=o,a=!0===r.schema.multiple?o.map((function(e){return e.uid})):o.uid):!0===r.schema.multiple&&(i=[],a=[])),{resolvedData:i,unResolvedData:a});this._data=s.unResolvedData,this._resolvedData=s.resolvedData,this._connection=t,this._self=e.data.self||!1;var u=this;n.on("updateFields",(function(e){var t=u.uid.split("."),n=e.data;t.forEach((function(e){n&&(n=n[e])})),u._data!==n&&(u._data=n)}))}return e.prototype.setData=function(e){var t=this,n=this,o={data:e,uid:n.uid,self:n._self};return n._self||-1===r.indexOf(n.data_type)&&n.data_type?this._connection.sendToParent("setData",o).then((function(){return t._data=e,Promise.resolve(n)})).catch((function(e){return Promise.reject(e)})):Promise.reject(new Error("Cannot call set data for current field type"))},e.prototype.getData=function(e){var t=(void 0===e?{}:e).resolved;return void 0!==t&&t?this._resolvedData:this._data},e.prototype.setFocus=function(){return this._connection.sendToParent("focus")},e.prototype.onChange=function(e){var t=this;if(!e||"function"!=typeof e)throw Error("Callback must be a function");this._emitter.on("extensionFieldChange",(function(n){t._data=n.data,t._resolvedData=n.data,e(n.data)}))},e}();t.default=o},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(5)),i=r(n(2)),a=n(17);i.default.CONFIG.LOG_LEVEL="error";var s=function(){function e(){}return e.init=function(){var e=this;return this._extension?Promise.resolve(this._extension):o.default.initialize(a.version).then((function(t){return e._extension=new o.default(t),Promise.resolve(e._extension)})).catch((function(e){return Promise.reject(e)}))},Object.defineProperty(e,"SDK_VERSION",{get:function(){return a.version},enumerable:!1,configurable:!0}),e}();t.default=s,e.exports=s},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(2)),u=a(n(3)),c=a(n(7)),d=a(n(8)),f=a(n(13)),l=a(n(14)),h=new(a(n(15)).default),p=function(){function e(e){var t=this;this.getConfig=function(){t.postRobot.sendToParent("get-config")};var r=e;switch(this.postRobot=s.default,this.app_id=r.data.app_id,this.currentUser=r.data.user,this.location=r.data.type,this.store=new l.default(s.default),this.stack=new d.default(r.data.stack,s.default),this.Extension={DashboardWidget:null,CustomField:null,SidebarWidget:null,RTEPlugin:null,StackConfigWidget:null,AppConfigWidget:null,FullscreenAppWidget:null},r.data.type){case"DASHBOARD_WIDGET":this.Extension.DashboardWidget={frame:new c.default(s.default,this.location,h,r.data.dashboard_width),stack:new d.default(r.data.stack,s.default)};break;case"SIDEBAR_WIDGET":this.Extension.SidebarWidget={entry:new f.default(r,s.default,h),stack:new d.default(r.data.stack,s.default)};break;case"CUSTOM_FIELD_WIDGET":this.Extension.CustomField={field:new u.default(r,s.default,h),fieldConfig:r.data.field_config,entry:new f.default(r,s.default,h),stack:new d.default(r.data.stack,s.default),frame:new c.default(s.default,this.location,h)};break;case"STACK_CONFIG_WIDGET":this.Extension.StackConfigWidget={setConfig:function(e){t.postRobot.sendToParent("set-config",e)}};break;case"APP_CONFIG_WIDGET":case"FULL_SCREEN_WIDGET":break;case"RTE_EXTENSION_WIDGET":default:Promise.resolve().then((function(){return i(n(16))})).then((function(e){var n=e.rtePluginInitializer;t.Extension.RTEPlugin=n}))}s.default.on("extensionEvent",(function(e){"entrySave"===e.data.name&&(h.emitEvent("entrySave",[{data:e.data.data}]),h.emitEvent("updateFields",[{data:e.data.data}])),"entryChange"===e.data.name&&h.emitEvent("entryChange",[{data:e.data.data}]),"entryPublish"===e.data.name&&h.emitEvent("entryPublish",[{data:e.data.data}]),"entryUnPublish"===e.data.name&&h.emitEvent("entryUnPublish",[{data:e.data.data}]),"dashboardResize"===e.data.name&&h.emitEvent("dashboardResize",[{state:e.data.state}]),"extensionFieldChange"===e.data.name&&h.emitEvent("extensionFieldChange",[{data:e.data.data}])}))}return e.initialize=function(e){return s.default.sendToParent("init",{version:e})},e.prototype.setReady=function(){return this.postRobot.sendToParent("ready")},e}();t.default=p},function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.js")}({"./node_modules/cross-domain-utils/src/index.js":function(e,t,n){"use strict";var r=n("./node_modules/cross-domain-utils/src/utils.js");n.d(t,"getActualDomain",(function(){return r.a})),n.d(t,"getAncestor",(function(){return r.b})),n.d(t,"getDomain",(function(){return r.c})),n.d(t,"getUserAgent",(function(){return r.d})),n.d(t,"isActuallySameDomain",(function(){return r.e})),n.d(t,"isAncestor",(function(){return r.f})),n.d(t,"isIframe",(function(){return r.g})),n.d(t,"isPopup",(function(){return r.h})),n.d(t,"isWindow",(function(){return r.i})),n.d(t,"isWindowClosed",(function(){return r.j})),n.d(t,"matchDomain",(function(){return r.k})),n.d(t,"stringifyDomainPattern",(function(){return r.l}));var o=n("./node_modules/cross-domain-utils/src/types.js");n.n(o)},"./node_modules/cross-domain-utils/src/types.js":function(e,t){},"./node_modules/cross-domain-utils/src/utils.js":function(e,t,n){"use strict";function r(e){return"[object RegExp]"===Object.prototype.toString.call(e)}t.a=d,t.c=f,t.e=l,t.j=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==i}if(t&&function(e){if(!l(e))return!1;try{if(e===window)return!0;if(a(e)&&c(e))return!0;if(f(window)===f(e))return!0}catch(e){}return!1}(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}var n=function(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}(y,e);if(-1!==n){var r=_[n];if(r&&function(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var t=e.ownerDocument;return!(!t||!t.body||t.body.contains(e))}(r))return!0}return!1},t.d=function(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent},t.b=m,t.f=function(e,t){var n=m(t);if(n)return n===e;if(t===e)return!1;if(function(e){if(e){try{if(e.top)return e.top}catch(e){}if(s(e)===e)return e;try{if(h(window,e)&&window.top)return window.top}catch(e){}try{if(h(e,window)&&window.top)return window.top}catch(e){}for(var t=0,n=function e(t){for(var n=[],r=0,o=p(t),i=null==o?0:o.length;r<i;r++){var a=o[r];n.push(a);for(var s=0,u=e(a),c=null==u?0:u.length;s<c;s++){var d=u[s];n.push(d)}}return n}(e),r=null==n?0:n.length;t<r;t++){var o=n[t];try{if(o.top)return o.top}catch(e){}if(s(o)===o)return o}}}(t)===t)return!1;for(var r=0,o=p(e),i=null==o?0:o.length;r<i;r++)if(o[r]===t)return!0;return!1},t.h=function(){return Boolean(u(window))},t.g=function(){return Boolean(s(window))},t.k=function e(t,n){if("string"==typeof t){if("string"==typeof n)return t===o.WILDCARD||n===t;if(r(n))return!1;if(Array.isArray(n))return!1}return r(t)?r(n)?t.toString()===n.toString():!Array.isArray(n)&&Boolean(n.match(t)):!!Array.isArray(t)&&(Array.isArray(n)?JSON.stringify(t)===JSON.stringify(n):!r(n)&&t.some((function(t){return e(t,n)})))},t.l=function(e){return Array.isArray(e)?"("+e.join(" | ")+")":r(e)?"RegExp("+e.toString():e.toString()},t.i=function(e){try{if(e===window)return!0}catch(e){if(e&&e.message===i)return!0}try{if("[object Window]"===Object.prototype.toString.call(e))return!0}catch(e){if(e&&e.message===i)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===i)return!0}try{e&&e.__cross_domain_utils_window_check__}catch(e){return!0}return!1};var o={MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",ABOUT_PROTOCOL:"about:",WILDCARD:"*"},i="Call was rejected by callee.\r\n";function a(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===o.ABOUT_PROTOCOL}function s(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function u(e){if(e&&!s(e))try{return e.opener}catch(e){}}function c(e){try{return e&&e.location&&e.location.href,!0}catch(e){}return!1}function d(e){var t=(e=e||window).location;if(!t)throw new Error("Can not read window location");var n=t.protocol;if(!n)throw new Error("Can not read window protocol");if(n===o.FILE_PROTOCOL)return o.FILE_PROTOCOL+"//";if(n===o.ABOUT_PROTOCOL){var r=s(e);return r&&c(r)?d(r):o.ABOUT_PROTOCOL+"//"}var i=t.host;if(!i)throw new Error("Can not read window host");return n+"//"+i}function f(e){var t=d(e=e||window);return t&&e.mockDomain&&0===e.mockDomain.indexOf(o.MOCK_PROTOCOL)?e.mockDomain:t}function l(e){try{if(e===window)return!0}catch(e){}try{var t=Object.getOwnPropertyDescriptor(e,"location");if(t&&!1===t.enumerable)return!1}catch(e){}try{if(a(e)&&c(e))return!0}catch(e){}try{if(d(e)===d(window))return!0}catch(e){}return!1}function h(e,t){if(!e||!t)return!1;var n=s(t);return n?n===e:-1!==function(e){var t=[];try{for(;e.parent!==e;)t.push(e.parent),e=e.parent}catch(e){}return t}(t).indexOf(e)}function p(e){var t=[],n=void 0;try{n=e.frames}catch(t){n=e}var r=void 0;try{r=n.length}catch(e){}if(0===r)return t;if(r){for(var o=0;o<r;o++){var i=void 0;try{i=n[o]}catch(e){continue}t.push(i)}return t}for(var a=0;a<100;a++){var s=void 0;try{s=n[a]}catch(e){return t}if(!s)return t;t.push(s)}return t}var y=[],_=[];function m(e){return u(e=e||window)||s(e)||void 0}},"./src/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d({},"WeakMap",(function(){return c}));var r={};n.d(r,"cleanUpWindow",(function(){return te})),n.d(r,"Promise",(function(){return O})),n.d(r,"bridge",(function(){return ne})),n.d(r,"init",(function(){return re})),n.d(r,"parent",(function(){return ee})),n.d(r,"send",(function(){return B})),n.d(r,"request",(function(){return F})),n.d(r,"sendToParent",(function(){return z})),n.d(r,"client",(function(){return Q})),n.d(r,"on",(function(){return Z})),n.d(r,"listen",(function(){return J})),n.d(r,"once",(function(){return $})),n.d(r,"listener",(function(){return V})),n.d(r,"CONFIG",(function(){return l})),n.d(r,"CONSTANTS",(function(){return d})),n.d(r,"disable",(function(){return X}));var o=n("./node_modules/cross-domain-utils/src/index.js");function i(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}var a,s=Object.defineProperty,u=Date.now()%1e9,c=function(){function e(){if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),u+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+u,function(){if(!window.WeakMap)return!1;if(!window.Object.freeze)return!1;try{var e=new window.WeakMap,t={};return window.Object.freeze(t),e.set(t,"__testvalue__"),"__testvalue__"===e.get(t)}catch(e){return!1}}())try{this.weakmap=new window.WeakMap}catch(e){}this.keys=[],this.values=[]}return e.prototype._cleanupClosedWindows=function(){for(var e=this.weakmap,t=this.keys,n=0;n<t.length;n++){var r=t[n];if(Object(o.isWindow)(r)&&Object(o.isWindowClosed)(r)){if(e)try{e.delete(r)}catch(e){}t.splice(n,1),this.values.splice(n,1),n-=1}}},e.prototype.isSafeToReadWrite=function(e){if(Object(o.isWindow)(e))return!1;try{e&&e.self,e&&e[this.name]}catch(e){return!1}return!0},e.prototype.set=function(e,t){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.set(e,t)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var r=this.name,o=e[r];o&&o[0]===e?o[1]=t:s(e,r,{value:[e,t],writable:!0})}else{this._cleanupClosedWindows();var a=this.keys,u=this.values,c=i(a,e);-1===c?(a.push(e),u.push(t)):u[c]=t}},e.prototype.get=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return t.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var n=i(this.keys,e);if(-1===n)return;return this.values[n]}var r=e[this.name];if(r&&r[0]===e)return r[1]},e.prototype.delete=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=e[this.name];n&&n[0]===e&&(n[0]=n[1]=void 0)}else{this._cleanupClosedWindows();var r=this.keys,o=i(r,e);-1!==o&&(r.splice(o,1),this.values.splice(o,1))}},e.prototype.has=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{return t.has(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=e[this.name];return!(!n||n[0]!==e)}return this._cleanupClosedWindows(),-1!==i(this.keys,e)},e}(),d={POST_MESSAGE_TYPE:{REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},POST_MESSAGE_ACK:{SUCCESS:"success",ERROR:"error"},POST_MESSAGE_NAMES:{METHOD:"postrobot_method",HELLO:"postrobot_ready",OPEN_TUNNEL:"postrobot_open_tunnel"},WINDOW_TYPES:{FULLPAGE:"fullpage",POPUP:"popup",IFRAME:"iframe"},WINDOW_PROPS:{POSTROBOT:"__postRobot__"},SERIALIZATION_TYPES:{METHOD:"postrobot_method",ERROR:"postrobot_error",PROMISE:"postrobot_promise",ZALGO_PROMISE:"postrobot_zalgo_promise",REGEX:"regex"},SEND_STRATEGIES:{POST_MESSAGE:"postrobot_post_message",BRIDGE:"postrobot_bridge",GLOBAL:"postrobot_global"},MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",BRIDGE_NAME_PREFIX:"__postrobot_bridge__",POSTROBOT_PROXY:"__postrobot_proxy__",WILDCARD:"*"},f={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"},l=(Object.keys(f).map((function(e){return f[e]})),{ALLOW_POSTMESSAGE_POPUP:!("__ALLOW_POSTMESSAGE_POPUP__"in window)||window.__ALLOW_POSTMESSAGE_POPUP__,BRIDGE_TIMEOUT:5e3,CHILD_WINDOW_TIMEOUT:5e3,ACK_TIMEOUT:-1!==window.navigator.userAgent.match(/MSIE/i)?2e3:1e3,RES_TIMEOUT:-1,ALLOWED_POST_MESSAGE_METHODS:(a={},a[d.SEND_STRATEGIES.POST_MESSAGE]=!0,a[d.SEND_STRATEGIES.BRIDGE]=!0,a[d.SEND_STRATEGIES.GLOBAL]=!0,a),ALLOW_SAME_ORIGIN:!1});0===window.location.href.indexOf(d.FILE_PROTOCOL)&&(l.ALLOW_POSTMESSAGE_POPUP=!0);var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+Object.prototype.toString.call(e)+">";if("string"==typeof e)return e;if(e instanceof Error){var n=e&&e.stack,r=e&&e.message;if(n&&r)return-1!==n.indexOf(r)?n:r+"\n"+n;if(n)return n;if(r)return r}return"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}catch(e){return"Error while stringifying error: "+p(e,t+1)}}var y=function(e){if(!e)return e;var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}};function _(){}function m(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,(function(){return e.charAt(Math.floor(Math.random()*e.length))}))}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(n>=100)throw new Error("Self-referential object passed, or object contained too many layers");var r=void 0;if("object"!==(void 0===e?"undefined":h(e))||null===e||Array.isArray(e)){if(!Array.isArray(e))throw new TypeError("Invalid type: "+(void 0===e?"undefined":h(e)));r=[]}else r={};return function(e,t){Array.isArray(e)?function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}(e,t):"object"===(void 0===e?"undefined":h(e))&&null!==e&&function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}(e,t)}(e,(function(e,o){var i=t(e,o);void 0!==i?r[o]=i:"object"===(void 0===e?"undefined":h(e))&&null!==e?r[o]=v(e,t,n+1):r[o]=e})),r}function w(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function g(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&e instanceof window.constructor)return!1;var t={}.toString;if(t){var n=t.call(e);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}function E(){var e=void 0;if("undefined"!=typeof window)e=window;else{if("undefined"==typeof window)throw new TypeError("Can not find global");e=window}var t=e.__zalgopromise__=e.__zalgopromise__||{};return t.flushPromises=t.flushPromises||[],t.activeCount=t.activeCount||0,t.possiblyUnhandledPromiseHandlers=t.possiblyUnhandledPromiseHandlers||[],t.dispatchedErrors=t.dispatchedErrors||[],t}var O=function(){function e(t){var n=this;if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],t){var r=void 0,o=void 0,i=!1,a=!1,s=!1;try{t((function(e){s?n.resolve(e):(i=!0,r=e)}),(function(e){s?n.reject(e):(a=!0,o=e)}))}catch(e){return void this.reject(e)}s=!0,i?this.resolve(r):a&&this.reject(o)}}return e.prototype.resolve=function(e){if(this.resolved||this.rejected)return this;if(g(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},e.prototype.reject=function(e){var t=this;if(this.resolved||this.rejected)return this;if(g(e))throw new Error("Can not reject promise with another promise");if(!e){var n=e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);e=new Error("Expected reject to be called with Error, got "+n)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout((function(){t.errorHandled||function(e,t){if(-1===E().dispatchedErrors.indexOf(e)){E().dispatchedErrors.push(e),setTimeout((function(){throw e}),1);for(var n=0;n<E().possiblyUnhandledPromiseHandlers.length;n++)E().possiblyUnhandledPromiseHandlers[n](e,t)}}(e,t)}),1),this.dispatch(),this},e.prototype.asyncReject=function(e){this.errorHandled=!0,this.reject(e)},e.prototype.dispatch=function(){var t=this,n=this.dispatching,r=this.resolved,o=this.rejected,i=this.handlers;if(!n&&(r||o)){this.dispatching=!0,E().activeCount+=1;for(var a=function(n){var a=i[n],s=a.onSuccess,u=a.onError,c=a.promise,d=void 0;if(r)try{d=s?s(t.value):t.value}catch(e){return c.reject(e),"continue"}else if(o){if(!u)return c.reject(t.error),"continue";try{d=u(t.error)}catch(e){return c.reject(e),"continue"}}d instanceof e&&(d.resolved||d.rejected)?(d.resolved?c.resolve(d.value):c.reject(d.error),d.errorHandled=!0):g(d)?d instanceof e&&(d.resolved||d.rejected)?d.resolved?c.resolve(d.value):c.reject(d.error):d.then((function(e){c.resolve(e)}),(function(e){c.reject(e)})):c.resolve(d)},s=0;s<i.length;s++)a(s);i.length=0,this.dispatching=!1,E().activeCount-=1,0===E().activeCount&&e.flushQueue()}},e.prototype.then=function(t,n){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new e;return this.handlers.push({promise:r,onSuccess:t,onError:n}),this.errorHandled=!0,this.dispatch(),r},e.prototype.catch=function(e){return this.then(void 0,e)},e.prototype.finally=function(t){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.finally expected a function");return this.then((function(n){return e.try(t).then((function(){return n}))}),(function(n){return e.try(t).then((function(){throw n}))}))},e.prototype.timeout=function(e,t){var n=this;if(this.resolved||this.rejected)return this;var r=setTimeout((function(){n.resolved||n.rejected||n.reject(t||new Error("Promise timed out after "+e+"ms"))}),e);return this.then((function(e){return clearTimeout(r),e}))},e.prototype.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},e.resolve=function(t){return t instanceof e?t:g(t)?new e((function(e,n){return t.then(e,n)})):(new e).resolve(t)},e.reject=function(t){return(new e).reject(t)},e.all=function(t){var n=new e,r=t.length,o=[];if(!r)return n.resolve(o),n;for(var i=function(i){var a=t[i];if(a instanceof e){if(a.resolved)return o[i]=a.value,r-=1,"continue"}else if(!g(a))return o[i]=a,r-=1,"continue";e.resolve(a).then((function(e){o[i]=e,0==(r-=1)&&n.resolve(o)}),(function(e){n.reject(e)}))},a=0;a<t.length;a++)i(a);return 0===r&&n.resolve(o),n},e.hash=function(t){var n={};return e.all(Object.keys(t).map((function(r){return e.resolve(t[r]).then((function(e){n[r]=e}))}))).then((function(){return n}))},e.map=function(t,n){return e.all(t.map(n))},e.onPossiblyUnhandledException=function(e){return function(e){return E().possiblyUnhandledPromiseHandlers.push(e),{cancel:function(){E().possiblyUnhandledPromiseHandlers.splice(E().possiblyUnhandledPromiseHandlers.indexOf(e),1)}}}(e)},e.try=function(t,n,r){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.try expected a function");var o=void 0;try{o=t.apply(n,r||[])}catch(t){return e.reject(t)}return e.resolve(o)},e.delay=function(t){return new e((function(e){setTimeout(e,t)}))},e.isPromise=function(t){return!!(t&&t instanceof e)||g(t)},e.flush=function(){var t=new e;return E().flushPromises.push(t),0===E().activeCount&&e.flushQueue(),t},e.flushQueue=function(){var e=E().flushPromises;E().flushPromises=[];for(var t=0,n=null==e?0:e.length;t<n;t++)e[t].resolve()},e}(),b=window[d.WINDOW_PROPS.POSTROBOT]=window[d.WINDOW_PROPS.POSTROBOT]||{};b.registerSelf=function(){};var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};b.methods=b.methods||new c;var S=y((function(){b.on(d.POST_MESSAGE_NAMES.METHOD,{origin:d.WILDCARD},(function(e){var t=e.source,n=e.origin,r=e.data,i=b.methods.get(t);if(!i)throw new Error("Could not find any methods this window has privileges to call");var a=i[r.id];if(!a)throw new Error("Could not find method with id: "+r.id);if(!Object(o.matchDomain)(a.domain,n))throw new Error("Method domain "+a.domain+" does not match origin "+n);return O.try((function(){return a.method.apply({source:t,origin:n,data:r},r.args)})).then((function(e){return{result:e,id:r.id,name:r.name}}))}))}));function T(e,t){return"object"===(void 0===e?"undefined":P(e))&&null!==e&&e.__type__===t}function A(e,t,n,r){var o=m(),i=b.methods.get(e);return i||(i={},b.methods.set(e,i)),i[o]={domain:t,method:n},{__type__:d.SERIALIZATION_TYPES.METHOD,__id__:o,__name__:r}}function j(e,t,n){function r(){var r=Array.prototype.slice.call(arguments);return b.send(e,d.POST_MESSAGE_NAMES.METHOD,{id:n.__id__,name:n.__name__,args:r},{domain:t,timeout:-1}).then((function(e){return e.data.result}),(function(e){throw e}))}return r.__name__=n.__name__,r.__xdomain__=!0,r.source=e,r.origin=t,r}function D(e,t,n){return new O((function(r,o){return j(e,t,n.__then__)(r,o)}))}function R(e){return b.send(e,d.POST_MESSAGE_NAMES.HELLO,{},{domain:d.WILDCARD,timeout:-1}).then((function(e){return{origin:e.origin}}))}b.readyPromises=b.readyPromises||new c;var C={};C[d.SEND_STRATEGIES.POST_MESSAGE]=function(e,t,n){(Array.isArray(n)?n:"string"==typeof n?[n]:[d.WILDCARD]).map((function(t){if(0===t.indexOf(d.MOCK_PROTOCOL)){if(window.location.protocol===d.FILE_PROTOCOL)return d.WILDCARD;if(!Object(o.isActuallySameDomain)(e))throw new Error("Attempting to send messsage to mock domain "+t+", but window is actually cross-domain");return Object(o.getActualDomain)(e)}return 0===t.indexOf(d.FILE_PROTOCOL)?d.WILDCARD:t})).forEach((function(n){return e.postMessage(t,n)}))};var L,M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function I(e,t,n){return O.try((function(){var r;if(t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=m(),i=Object(o.isPopup)()?d.WINDOW_TYPES.POPUP:Object(o.isIframe)()?d.WINDOW_TYPES.IFRAME:d.WINDOW_TYPES.FULLPAGE,a=Object(o.getDomain)(window);return M({},t,n,{sourceDomain:a,id:t.id||r,windowType:i})}(e,t,{data:function(e,n,r){return v({obj:t.data},(function(t,r){return"function"==typeof t?A(e,n,t,r.toString()):t instanceof Error?(o=t,{__type__:d.SERIALIZATION_TYPES.ERROR,__message__:p(o),__code__:o.code}):window.Promise&&t instanceof window.Promise?function(e,t,n,r){return{__type__:d.SERIALIZATION_TYPES.PROMISE,__then__:A(e,t,(function(e,t){return n.then(e,t)}),r+".then")}}(e,n,t,r.toString()):O.isPromise(t)?function(e,t,n,r){return{__type__:d.SERIALIZATION_TYPES.ZALGO_PROMISE,__then__:A(e,t,(function(e,t){return n.then(e,t)}),r+".then")}}(e,n,t,r.toString()):w(t)?(i=t,{__type__:d.SERIALIZATION_TYPES.REGEX,__source__:i.source}):void 0;var o,i})).obj}(e,n),domain:n}),e===window&&!l.ALLOW_SAME_ORIGIN)throw new Error("Attemping to send message to self");if(Object(o.isWindowClosed)(e))throw new Error("Window is closed");var i=[],a=function(e,t,n){var r=void 0,o=void 0;try{if("{}"!==JSON.stringify({})&&(r=Object.prototype.toJSON,delete Object.prototype.toJSON),"{}"!==JSON.stringify({}))throw new Error("Can not correctly serialize JSON objects");if("[]"!==JSON.stringify([])&&(o=Array.prototype.toJSON,delete Array.prototype.toJSON),"[]"!==JSON.stringify([]))throw new Error("Can not correctly serialize JSON objects")}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}var i=JSON.stringify.call(this,e,null,2);try{r&&(Object.prototype.toJSON=r),o&&(Array.prototype.toJSON=o)}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}return i}(((r={})[d.WINDOW_PROPS.POSTROBOT]=t,r));return O.map(Object.keys(C),(function(t){return O.try((function(){if(!l.ALLOWED_POST_MESSAGE_METHODS[t])throw new Error("Strategy disallowed: "+t);return C[t](e,a,n)})).then((function(){return i.push(t+": success"),!0}),(function(e){return i.push(t+": "+p(e)+"\n"),!1}))})).then((function(e){var n=e.some(Boolean),r=t.type+" "+t.name+" "+(n?"success":"error")+":\n  - "+i.join("\n  - ")+"\n";if(!n)throw new Error(r)}))}))}function k(e){return b.responseListeners[e]}function W(e){delete b.responseListeners[e]}function x(e){return Boolean(b.erroredResponseListeners[e])}function q(e){var t=e.name,n=e.win,r=e.domain;if(n===d.WILDCARD&&(n=null),r===d.WILDCARD&&(r=null),!t)throw new Error("Name required to get request listener");var i=b.requestListeners[t];if(i)for(var a=0,s=[n,b.WINDOW_WILDCARD],u=null==s?0:s.length;a<u;a++){var c=s[a],f=c&&i.get(c);if(f){if(r&&"string"==typeof r){if(f[r])return f[r];if(f.__domain_regex__)for(var l=0,h=f.__domain_regex__,p=null==h?0:h.length;l<p;l++){var y=h[l],_=y.regex,m=y.listener;if(Object(o.matchDomain)(_,r))return m}}if(f[d.WILDCARD])return f[d.WILDCARD]}}}b.responseListeners=b.responseListeners||{},b.requestListeners=b.requestListeners||{},b.WINDOW_WILDCARD=b.WINDOW_WILDCARD||new function(){},b.erroredResponseListeners=b.erroredResponseListeners||{};var N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G=((L={})[d.POST_MESSAGE_TYPE.ACK]=function(e,t,n){if(!x(n.hash)){var r=k(n.hash);if(!r)throw new Error("No handler found for post message ack for message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(o.matchDomain)(r.domain,t))throw new Error("Ack origin "+t+" does not match domain "+r.domain.toString());r.ack=!0}},L[d.POST_MESSAGE_TYPE.REQUEST]=function(e,t,n){var r=q({name:n.name,win:e,domain:t});function i(r){return n.fireAndForget||Object(o.isWindowClosed)(e)?O.resolve():I(e,N({target:n.originalSource,hash:n.hash,name:n.name},r),t)}return O.all([i({type:d.POST_MESSAGE_TYPE.ACK}),O.try((function(){if(!r)throw new Error("No handler found for post message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(o.matchDomain)(r.domain,t))throw new Error("Request origin "+t+" does not match domain "+r.domain.toString());var i=n.data;return r.handler({source:e,origin:t,data:i})})).then((function(e){return i({type:d.POST_MESSAGE_TYPE.RESPONSE,ack:d.POST_MESSAGE_ACK.SUCCESS,data:e})}),(function(e){var t=p(e).replace(/^Error: /,""),n=e.code;return i({type:d.POST_MESSAGE_TYPE.RESPONSE,ack:d.POST_MESSAGE_ACK.ERROR,error:t,code:n})}))]).then(_).catch((function(e){if(r&&r.handleError)return r.handleError(e);throw e}))},L[d.POST_MESSAGE_TYPE.RESPONSE]=function(e,t,n){if(!x(n.hash)){var r=k(n.hash);if(!r)throw new Error("No handler found for post message response for message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(o.matchDomain)(r.domain,t))throw new Error("Response origin "+t+" does not match domain "+Object(o.stringifyDomainPattern)(r.domain));if(W(n.hash),n.ack===d.POST_MESSAGE_ACK.ERROR){var i=new Error(n.error);return n.code&&(i.code=n.code),r.respond(i,null)}if(n.ack===d.POST_MESSAGE_ACK.SUCCESS){var a=n.data||n.response;return r.respond(null,{source:e,origin:t,data:a})}}},L),U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function K(e){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!e.source)return}catch(e){return}var t=e.source,n=e.origin,r=function(e){var t,n=void 0;try{t=e,n=JSON.parse(t)}catch(e){return}if(n&&"object"===(void 0===n?"undefined":U(n))&&null!==n&&(n=n[d.WINDOW_PROPS.POSTROBOT])&&"object"===(void 0===n?"undefined":U(n))&&null!==n&&n.type&&"string"==typeof n.type&&G[n.type])return n}(e.data);if(r){if(!r.sourceDomain||"string"!=typeof r.sourceDomain)throw new Error("Expected message to have sourceDomain");0!==r.sourceDomain.indexOf(d.MOCK_PROTOCOL)&&0!==r.sourceDomain.indexOf(d.FILE_PROTOCOL)||(n=r.sourceDomain),-1===b.receivedMessages.indexOf(r.id)&&(b.receivedMessages.push(r.id),Object(o.isWindowClosed)(t)&&!r.fireAndForget||(r.data&&(r.data=function(e,t,n){return v({obj:r.data},(function(n){if("object"===(void 0===n?"undefined":P(n))&&null!==n)return T(n,d.SERIALIZATION_TYPES.METHOD)?j(e,t,n):T(n,d.SERIALIZATION_TYPES.ERROR)?function(e,t,n){var r=new Error(n.__message__);return n.__code__&&(r.code=n.__code__),r}(0,0,n):T(n,d.SERIALIZATION_TYPES.PROMISE)?function(e,t,n){return window.Promise?new window.Promise((function(r,o){return j(e,t,n.__then__)(r,o)})):D(e,t,n)}(e,t,n):T(n,d.SERIALIZATION_TYPES.ZALGO_PROMISE)?D(e,t,n):T(n,d.SERIALIZATION_TYPES.REGEX)?function(e,t,n){return new RegExp(n.__source__)}(0,0,n):void 0})).obj}(t,n)),G[r.type](t,n,r)))}}function H(e){try{e.source}catch(e){return}K({source:e.source||e.sourceElement,origin:e.origin||e.originalEvent&&e.originalEvent.origin,data:e.data})}function F(e){return O.try((function(){if(!e.name)throw new Error("Expected options.name");var t=e.name,n=void 0,r=void 0;if("string"==typeof e.window){var i=document.getElementById(e.window);if(!i)throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be a valid element id");if("iframe"!==i.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(!i.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");n=i.contentWindow}else if(e.window instanceof HTMLIFrameElement){if("iframe"!==e.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(e.window&&!e.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");e.window&&e.window.contentWindow&&(n=e.window.contentWindow)}else n=e.window;if(!n)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var a=n;r=e.domain||d.WILDCARD;var s=e.name+"_"+m();if(Object(o.isWindowClosed)(a))throw new Error("Target window is closed");var u=!1,c=b.requestPromises.get(a);c||(c=[],b.requestPromises.set(a,c));var f=O.try((function(){if(Object(o.isAncestor)(window,a))return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",r=b.readyPromises.get(e);return r||(r=new O,b.readyPromises.set(e,r),-1!==t&&setTimeout((function(){return r.reject(new Error(n+" did not load after "+t+"ms"))}),t),r)}(a,e.timeout||l.CHILD_WINDOW_TIMEOUT)})).then((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if(w(r)&&!e)return R(a)})).then((function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if(w(r)){if(!Object(o.matchDomain)(r,n))throw new Error("Remote window domain "+n+" does not match regex: "+r.toString());r=n}if("string"!=typeof r&&!Array.isArray(r))throw new TypeError("Expected domain to be a string or array");var i=r;return new O((function(n,r){var h=void 0;if(e.fireAndForget||function(e,t){b.responseListeners[e]=t}(s,h={name:t,window:a,domain:i,respond:function(e,t){e||(u=!0,c.splice(c.indexOf(f,1))),e?r(e):n(t)}}),I(a,{type:d.POST_MESSAGE_TYPE.REQUEST,hash:s,name:t,data:e.data,fireAndForget:e.fireAndForget},i).catch(r),e.fireAndForget)return n();var p=l.ACK_TIMEOUT,y=e.timeout||l.RES_TIMEOUT,_=100;setTimeout((function n(){if(!u){if(Object(o.isWindowClosed)(a))return h.ack?r(new Error("Window closed for "+t+" before response")):r(new Error("Window closed for "+t+" before ack"));if(p=Math.max(p-_,0),-1!==y&&(y=Math.max(y-_,0)),h.ack){if(-1===y)return;_=Math.min(y,2e3)}else{if(0===p)return r(new Error("No ack for postMessage "+t+" in "+Object(o.getDomain)()+" in "+l.ACK_TIMEOUT+"ms"));if(0===y)return r(new Error("No response for postMessage "+t+" in "+Object(o.getDomain)()+" in "+(e.timeout||l.RES_TIMEOUT)+"ms"))}setTimeout(n,_)}}),_)}))}));return f.catch((function(){!function(e){b.erroredResponseListeners[e]=!0}(s),W(s)})),c.push(f),f}))}function B(e,t,n,r){return(r=r||{}).window=e,r.name=t,r.data=n,F(r)}function z(e,t,n){var r=Object(o.getAncestor)();return r?B(r,e,t,n):new O((function(e,t){return t(new Error("Window does not have a parent"))}))}function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.window)throw new Error("Expected options.window");var t=e.window;return{send:function(n,r){return B(t,n,r,e)}}}b.receivedMessages=b.receivedMessages||[],b.receiveMessage=K,b.requestPromises=b.requestPromises||new c,b.send=B;var Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function J(e){if(!e.name)throw new Error("Expected options.name");if(!e.handler)throw new Error("Expected options.handler");var t,n=e.name,r=e.window,i=e.domain,a={handler:e.handler,handleError:e.errorHandler||function(e){throw e},window:r,domain:i||d.WILDCARD,name:n},s=function e(t,n){var r=t.name,o=t.win,i=t.domain;if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var a=[],s=0,u=o,f=null==u?0:u.length;s<f;s++){var l=u[s];a.push(e({name:r,domain:i,win:l},n))}return{cancel:function(){for(var e=0,t=null==a?0:a.length;e<t;e++)a[e].cancel()}}}if(Array.isArray(i)){for(var h=[],p=0,y=i,_=null==y?0:y.length;p<_;p++){var m=y[p];h.push(e({name:r,win:o,domain:m},n))}return{cancel:function(){for(var e=0,t=null==h?0:h.length;e<t;e++)h[e].cancel()}}}var v=q({name:r,win:o,domain:i});if(o&&o!==d.WILDCARD||(o=b.WINDOW_WILDCARD),i=i||d.WILDCARD,v)throw o&&i?new Error("Request listener already exists for "+r+" on domain "+i.toString()+" for "+(o===b.WINDOW_WILDCARD?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" for "+(o===b.WINDOW_WILDCARD?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" on domain "+i.toString()):new Error("Request listener already exists for "+r);var g=b.requestListeners,E=g[r];E||(E=new c,g[r]=E);var O=E.get(o);O||(O={},E.set(o,O));var P=i.toString(),S=O.__domain_regex__,T=void 0;return w(i)?(S||(S=[],O.__domain_regex__=S),T={regex:i,listener:n},S.push(T)):O[P]=n,{cancel:function(){O&&(delete O[P],o&&0===Object.keys(O).length&&E.delete(o),T&&S.splice(S.indexOf(T,1)))}}}({name:n,win:r,domain:i},a);if(e.once){var u=a.handler;a.handler=y((function(){return s.cancel(),u.apply(this,arguments)}))}if(a.window&&e.errorOnClose)var f=(t=void 0,t=setTimeout((function e(){t=setTimeout(e,50),function(){r&&"object"===(void 0===r?"undefined":Y(r))&&Object(o.isWindowClosed)(r)&&(f.cancel(),a.handleError(new Error("Post message target window is closed")))}.call()}),50),{cancel:function(){clearTimeout(t)}});return{cancel:function(){s.cancel()}}}function Z(e,t,n){return"function"==typeof t&&(n=t,t={}),(t=t||{}).name=e,t.handler=n||t.handler,J(t)}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"function"==typeof t&&(n=t,t={}),t=t||{},n=n||t.handler;var r=t.errorHandler,o=new O((function(o,i){(t=t||{}).name=e,t.once=!0,t.handler=function(e){if(o(e),n)return n(e)},t.errorHandler=function(e){if(i(e),r)return r(e)}})),i=J(t);return o.cancel=i.cancel,o}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(t,n){return Z(t,e,n)}}}function X(){delete window[d.WINDOW_PROPS.POSTROBOT],window.removeEventListener("message",H)}b.on=Z;var ee=Object(o.getAncestor)();function te(e){var t=b.requestPromises.get(e);if(t)for(var n=0,r=null==t?0:t.length;n<r;n++)t[n].reject(new Error("No response from window - cleaned up"));b.popupWindowsByWin&&b.popupWindowsByWin.delete(e),b.remoteWindows&&b.remoteWindows.delete(e),b.requestPromises.delete(e),b.methods.delete(e),b.readyPromises.delete(e)}var ne=null;function re(){var e,t;b.initialized||(t=H,(e=window).addEventListener?e.addEventListener("message",t):e.attachEvent("onmessage",t),function(){e=function(e){var t=e.source,n=e.origin,r=b.readyPromises.get(t)||new O;r.resolve({origin:n}),b.readyPromises.set(t,r)},b.on(d.POST_MESSAGE_NAMES.HELLO,{domain:d.WILDCARD},(function(t){var n=t.source,r=t.origin;return e({source:n,origin:r})}));var e,t=Object(o.getAncestor)();t&&R(t).catch(_)}(),S({on:Z,send:B})),b.initialized=!0}re(),n.d(t,"cleanUpWindow",(function(){return te})),n.d(t,"Promise",(function(){return O})),n.d(t,"bridge",(function(){return ne})),n.d(t,"init",(function(){return re})),n.d(t,"parent",(function(){return ee})),n.d(t,"send",(function(){return B})),n.d(t,"request",(function(){return F})),n.d(t,"sendToParent",(function(){return z})),n.d(t,"client",(function(){return Q})),n.d(t,"on",(function(){return Z})),n.d(t,"listen",(function(){return J})),n.d(t,"once",(function(){return $})),n.d(t,"listener",(function(){return V})),n.d(t,"CONFIG",(function(){return l})),n.d(t,"CONSTANTS",(function(){return d})),n.d(t,"disable",(function(){return X})),t.default=r}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o={attributes:!0,childList:!0,subtree:!0},i=function(){function e(e,t,n,r){void 0===r&&(r="half_width"),this._connection=e,this._autoResizingEnabled=!1,this._resizingEnabled=!1,this.type=t,this.state=r,this._emitter=n}return e.prototype.enableResizing=function(){return"DASHBOARD"!==this.type?Promise.resolve():(this._resizingEnabled=!0,this._connection.sendToParent("window",{action:"enableResizing"}))},e.prototype.onDashboardResize=function(e){var t=this;if("DASHBOARD"!==this.type)return!1;if(!e||"function"!=typeof e)throw Error("Callback must be a function");return t._emitter.on("dashboardResize",(function(n){t.state=n.state,e(n.state)})),!0},e.prototype.updateHeight=function(e){if("DASHBOARD"===this.type&&"half_width"===this.state)return Promise.resolve();if(!e||isNaN(e))this._height=Math.ceil(document.documentElement.getBoundingClientRect().height);else{if(this._height===e)return Promise.resolve();this._height=e}return this._connection.sendToParent("resize",this._height)},e.prototype.enableAutoResizing=function(){return this._autoResizingEnabled||"half_width"===this.state&&"DASHBOARD"===this.type||(this._autoResizingEnabled=!0,(r=new MutationObserver(this.updateHeight.bind(this))).observe(window.document.body,o)),this},e.prototype.disableAutoResizing=function(){return this._autoResizingEnabled?(this._autoResizingEnabled=!1,r.disconnect(),this):this},e}();t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(9)),i=r(n(11));function a(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function s(e){return Promise.reject(e)}var u=function(){function e(e,t){this._connection=t,this._data=e,this.ContentType=i.default(t),this.Asset=o.default(t)}return e.prototype.getData=function(){return this._data},e.prototype.getContentType=function(e,t){if(void 0===t&&(t={}),!e)return Promise.reject(new Error("uid is required"));var n={uid:e,params:t,action:"getContentType"};return this._connection.sendToParent("stackQuery",n).then(a).catch(s)},e.prototype.getContentTypes=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=t;n.query=e;var r={params:n,action:"getContentTypes"};return this._connection.sendToParent("stackQuery",r).then(a).catch(s)},e.prototype.getEnvironment=function(e,t){if(void 0===t&&(t={}),!e)return Promise.reject(new Error("name is required"));var n={name:e,params:t,action:"getEnvironment"};return this._connection.sendToParent("stackQuery",n).then(a).catch(s)},e.prototype.getEnvironments=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=t;n.query=e;var r={params:n,action:"getEnvironments"};return this._connection.sendToParent("stackQuery",r).then(a).catch(s)},e.prototype.getLocale=function(e,t){if(void 0===t&&(t={}),!e)return Promise.reject(new Error("code is required"));var n={code:e,params:t,action:"getLocale"};return this._connection.sendToParent("stackQuery",n).then(a).catch(s)},e.prototype.getLocales=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=t;n.query=e;var r={params:n,action:"getLocales"};return this._connection.sendToParent("stackQuery",r).then(a).catch(s)},e}();t.default=u},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(1)),u=n(0),c={};function d(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function f(e){return Promise.reject(e)}var l=function(e){function t(t){var n=e.call(this,t)||this;return n.getReferences=u.getReferences,n.environment=u.environment,n}return o(t,e),t.Query=function(){var t=e.Query.call(this);return Object.assign(t,{language:u.language,environment:u.environment}),t},t.module=function(e){return void 0===e&&(e=!1),e?"Assets":"Asset"},Object.defineProperty(t,"connection",{get:function(){return c},enumerable:!1,configurable:!0}),t.getRteAssets=function(){return this.connection.sendToParent("stackQuery",{action:"getRteAssets"}).then(d).catch(f)},t.getAssetsOfSpecificTypes=function(e){return e&&"string"==typeof e?this.connection.sendToParent("stackQuery",{action:"getAssetsOfSpecificTypes",asset_type:e}).then(d).catch(f):Promise.reject(new Error("Kindly provide valid parameters"))},t.prototype.publish=function(e){return!e||"object"!=typeof e||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):this.fetch("publishAsset",e)},t.prototype.unpublish=function(e){return!e||"object"!=typeof e||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):this.fetch("unpublishAsset",e)},t}(s.default);t.default=function(e){return c=e,new Proxy(l,{apply:function(e,t,n){return new(e.bind.apply(e,i([void 0],n)))}})}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(0));function s(e){return"string"==typeof e.data?Promise.reject(e.data):Promise.resolve(e.data)}function u(e){return Promise.reject(e)}var c=function(e){return function(t,n){if(t&&n&&"string"==typeof t&&void 0!==n)return this._query.query[t]=this._query.query.file_size||{},this._query.query[t][e]=n,this;throw Error("Kindly provide valid parameters.")}},d=function(e){var t=e?"$in":"$nin";return function(e,n){if(e&&n&&"string"==typeof e&&Array.isArray(n))return this._query.query[e]=this._query.query[e]||{},this._query.query[e][t]=this._query.query[e][t]||[],this._query.query[e][t]=this._query.query[e][t].concat(n),this;throw Error("Kindly provide valid parameters.")}},f=function(e){return function(t){if(t&&"string"==typeof t)return this._query.query[t]=this._query.query[t]||{},this._query.query[t].$exists=e,this;throw Error("Kindly provide valid parameters.")}},l=function(e){return function(){for(var t=[],n=0,r=arguments.length;n<r;n+=1)arguments[n]instanceof y&&arguments[n]._query.query?t.push(arguments[n]._query.query):"object"==typeof arguments[n]&&t.push(arguments[n]);return this._query.query[e]?this._query.query[e]=this._query.query[e].concat(t):this._query.query[e]=t,this}},h=function(e){return function(t){if(t&&"string"==typeof t)return this._query[e]=t,this;throw Error("Argument should be a string.")}},p=function(e){return function(t){if("number"==typeof t)return this._query[e]=t,this;throw Error("Argument should be a number.")}},y=function(){function e(e,t,n){this.module=t,this._connection=e,this._query={},this._query.query=this._query.query||{},this.contentTypeUid=n,this.only=a.transform("only"),this.except=a.transform("except"),this.addQuery=a.addQuery,this.lessThan=c("$lt"),this.lessThanOrEqualTo=c("$lte"),this.greaterThan=c("$gt"),this.greaterThanOrEqualTo=c("$gte"),this.notEqualTo=c("$ne"),this.containedIn=d(!0),this.notContainedIn=d(!1),this.exists=f(!0),this.notExists=f(!1),this.ascending=h("asc"),this.descending=h("desc"),this.beforeUid=h("before_uid"),this.afterUid=h("after_uid"),this.skip=p("skip"),this.limit=p("limit"),this.or=l("$or"),this.and=l("$and"),this.addParam=a.addParam}return e.prototype.equalTo=function(e,t){if(e&&"string"==typeof e)return this._query.query[e]=t,this;throw Error("Kindly provide valid parameters.")},e.prototype.where=function(e,t){if(e&&"string"==typeof e)return this._query.query[e]=t,this;throw Error("Kindly provide valid parameters.")},e.prototype.count=function(){this._query.count=!0;var e={content_type_uid:this.contentTypeUid,params:this._query,action:"get"+this.module};return this._connection.sendToParent("stackQuery",e).then(s).catch(u)},e.prototype.query=function(e){if("object"==typeof e)return this._query.query=a.mergeDeep(this._query.query,e),this;throw Error("Kindly provide valid parameters")},e.prototype.tags=function(e){if(Array.isArray(e))return this._query.tags=e,this;throw Error("Kindly provide valid parameters")},e.prototype.includeCount=function(){return this._query.include_count=!0,this},e.prototype.getQuery=function(){return this._query.query},e.prototype.regex=function(e,t,n){if(e&&t&&"string"==typeof e&&"string"==typeof t)return this._query.query[e]={$regex:t},n&&(this._query.query[e].$options=n),this;throw Error("Kindly provide valid parameters.")},e.prototype.search=function(e){if(e&&"string"==typeof e)return this._query.typeahead=e,this;throw Error("Kindly provide valid parameters.")},e.prototype.find=function(){var e={content_type_uid:this.contentTypeUid,params:this._query,action:"get"+this.module};return this._connection.sendToParent("stackQuery",e).then(s).catch(u)},e.prototype.findOne=function(){this.singleEntry=!0,this._query.limit=1;var e={content_type_uid:this.contentTypeUid,params:this._query,action:"get"+this.module};return this._connection.sendToParent("stackQuery",e).then(s).catch(u)},e}();t.default=y},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(12)),u=a(n(1)),c={},d=function(e){function t(t){var n=e.call(this,t)||this;return n.Entry=s.default(n.constructor.connection,n.uid),n}return o(t,e),Object.defineProperty(t,"connection",{get:function(){return c},enumerable:!1,configurable:!0}),t}(u.default);t.default=function(e){return c=e,new Proxy(d,{apply:function(e,t,n){return new(e.bind.apply(e,i([void 0],n)))}})}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(1)),u=n(0),c={},d="",f=function(e){function t(t){var n=e.call(this,t)||this;return n._query={},n}return o(t,e),t.Query=function(){var t=e.Query.call(this);return Object.assign(t,{language:u.language,environment:u.environment,includeOwner:u.includeOwner,includeContentType:u.includeContentType,includeSchema:u.includeSchema,includeReference:u.includeReference}),t},Object.defineProperty(t,"connection",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(t,"contentTypeUid",{get:function(){return d},enumerable:!1,configurable:!0}),t.module=function(e){return void 0===e&&(e=!1),e?"Entries":"Entry"},t.prototype.getLanguages=function(){return this.fetch("getEntryLanguages")},t.prototype.unlocalize=function(e){return e&&"string"==typeof e?(this._query.locale=e,this.fetch("unlocalizeEntry")):Promise.reject(new Error("Kindly provide valid parameters"))},t.prototype.publish=function(e){return!e||"object"!=typeof e||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):(this._query={},this.fetch("publishEntry",e))},t.prototype.unpublish=function(e){return!e||"object"!=typeof e||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):(this._query={},this.fetch("unpublishEntry",e))},t.prototype.setWorkflowStage=function(e){return!e||"object"!=typeof e||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):this.fetch("setWorkflowStageEntry",e)},t.prototype.update=function(e,t){return!e||"object"!=typeof e||e instanceof Array?Promise.reject(new Error("Kindly provide valid parameters")):(this._query.locale=t,this.fetch("updateEntry",e))},t}(s.default);t.default=function(e,t){return c=e,d=t,new Proxy(f,{apply:function(e,t,n){var r=new(e.bind.apply(e,i([void 0],n)));return Object.assign(r,{getReferences:u.getReferences,addQuery:u.addQuery,language:u.language,environment:u.environment,includeOwner:u.includeOwner,includeContentType:u.includeContentType,includeSchema:u.includeSchema,includeReference:u.includeReference}),r}})}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(3)),i=function(){function e(e,t,n){this.content_type=e.data.content_type,this._data=e.data.entry,this.locale=e.data.locale,this._connection=t,this._emitter=n;var r=this;this._emitter.on("entrySave",(function(e){r._data=e.data})),this._emitter.on("entryChange",(function(e){r._changedData=e.data}))}return e.prototype.getData=function(){return this._data},e.prototype.getField=function(e){var t=e.split("."),n=this._data,r=this.content_type.schema;try{var i=!1,a=!1;t.forEach((function(e,o){if(i)a?a=!1:i=!1;else{if(!(r=r.find((function(t){return t.uid===e}))))throw Error("schema not found");if(n=n[e],"group"!==r.data_type&&"global_field"!==r.data_type||!1!==r.multiple||t.length===o+1)if("group"!==r.data_type&&"global_field"!==r.data_type||!0!==r.multiple||t.length===o+1){if("blocks"===r.data_type&&t.length!==o+1){var s=Object.keys(n[t[o+1]])[0];r=r.blocks.find((function(e){return e.uid===s})),t.length===o+2?n=n[t[o+1]]:(n=n[t[o+1]][s],r=r.schema),i=!0,a=!0}}else r=r.schema,n=n[t[o+1]],i=!0;else r=r.schema}}))}catch(e){throw Error("Invalid uid, Field not found")}var s={data:{uid:e,value:n,schema:r,data_type:r.data_type}},u=new o.default(s,this._connection,this._emitter);return delete u.onChange,u},e.prototype.onSave=function(e){if(!e||"function"!=typeof e)throw Error("Callback must be a function");this._emitter.on("entrySave",(function(t){e(t.data)}))},e.prototype.onChange=function(e){if(!e||"function"!=typeof e)throw Error("Callback must be a function");this._emitter.on("entryChange",(function(t){e(t.data)}))},e.prototype.onPublish=function(e){if(!e||"function"!=typeof e)throw Error("Callback must be a function");this._emitter.on("entryPublish",(function(t){e(t.data)}))},e.prototype.onUnPublish=function(e){if(!e||"function"!=typeof e)throw Error("Callback must be a function");this._emitter.on("entryUnPublish",(function(t){e(t.data)}))},e}();t.default=i},function(e,t,n){"use strict";function r(e){return Promise.reject(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this._connection=e}return e.prototype.get=function(e){if(!e||"string"!=typeof e)throw new Error("Kindly provide valid parameters");return this._connection.sendToParent("store",{action:"get",key:e}).then((function(e){return Promise.resolve(e.data)})).catch(r)},e.prototype.getAll=function(){return this._connection.sendToParent("store",{action:"getAll"}).then((function(e){var t=e.data,n=void 0===t?{}:t;return Promise.resolve(n)})).catch(r)},e.prototype.set=function(e,t){if(!e||!t||"string"!=typeof e)throw new Error("Kindly provide valid parameters");return this._connection.sendToParent("store",{action:"set",key:e,value:t}).then((function(){return Promise.resolve(!0)})).catch(r)},e.prototype.remove=function(e){if(!e||"string"!=typeof e)throw new Error("Kindly provide valid parameters");return this._connection.sendToParent("store",{action:"remove",key:e}).then((function(){return Promise.resolve(!0)})).catch(r)},e.prototype.clear=function(){return this._connection.sendToParent("store",{action:"clear"}).then((function(){return Promise.resolve(!0)})).catch(r)},e}();t.default=o},function(e,t,n){var r;
/*!
 * EventEmitter v5.2.4 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */!function(t){"use strict";function o(){}var i=o.prototype,a=t.EventEmitter;function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function u(e){return function(){return this[e].apply(this,arguments)}}i.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},i.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),o="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===s(r[n],t)&&r[n].push(o?t:{listener:t,once:!1});return this},i.on=u("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=u("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,t){var n,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&-1!==(n=s(o[r],t))&&o[r].splice(n,1);return this},i.off=u("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var r,o,i=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)i.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(o=t[r])&&("function"==typeof o?i.call(this,r,o):a.call(this,r,o));return this},i.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},i.removeAllListeners=u("removeEvent"),i.emitEvent=function(e,t){var n,r,o,i,a=this.getListenersAsObject(e);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].slice(0),o=0;o<n.length;o++)!0===(r=n[o]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},i.trigger=u("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=a,o},void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}(this||{})},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.rtePluginInitializer=t.RTEPlugin=void 0;var o=function(e){var t=this;this.isContainer=!1,this.addPlugins=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.pluginMetaData.meta.isDependent)throw Error("cannot have another container inside");t.isContainer=!0,e.forEach((function(e){if(e.isContainer)throw Error("cannot have another container inside");e.pluginMetaData.registry.category=t.pluginMetaData.meta.id,t.containerMetaData.meta.dependentPlugins.push(e),e.pluginMetaData.meta.isDependent=!0}))},this.on=function(e,n){switch(e){case"beforeChildRender":t.pluginMetaData.registry.beforeChildrenRender=n;break;case"beforeRender":t.pluginMetaData.registry.beforeElementRender=n;break;case"exec":t.pluginMetaData.registry.handleMouseDown=n;break;case"paste":case"deleteBackward":case"deleteForward":case"insertBreak":case"normalize":t.pluginMetaData.meta.editorCallbacks[e]=n}},this.get=function(){return t.isContainer?t.containerMetaData:t.pluginMetaData},this.pluginMetaData=e,this.containerMetaData={registry:{id:this.pluginMetaData.meta.id,title:this.pluginMetaData.registry.title,rootCategory:!1,toolbar:r({},this.pluginMetaData.registry.toolbar)},meta:{id:this.pluginMetaData.meta.id,dependentPlugins:[]}}};t.RTEPlugin=o;t.rtePluginInitializer=function(e,t,n){if(!(e&&t&&n))throw Error("i am an error");var r={registry:{title:t,toolbar:{inMainToolbar:!0,inHoveringToolbar:!0},dndOptions:{},isContentstackElement:!0},meta:{id:e,elementType:null,editorCallbacks:{},isDependent:!1}};return Object.entries(n).forEach((function(e){var t=e[0],n=e[1];switch(t){case"iconName":r.registry.iconName=n;break;case"displayOn":if(r.registry.toolbar={inHoveringToolbar:!1,inMainToolbar:!1},"string"==typeof n)switch(n){case"toolbar":r.registry.toolbar.inMainToolbar=!0;break;case"hoveringToolbar":r.registry.toolbar.inHoveringToolbar=!0}else Array.isArray(n)&&n.forEach((function(e){switch(e){case"toolbar":r.registry.toolbar.inMainToolbar=!0;break;case"hoveringToolbar":r.registry.toolbar.inHoveringToolbar=!0}}));break;case"elementType":r.meta.elementType=n;break;case"dnd":"object"!=typeof n||Array.isArray(n)||(void 0===r.registry.dndOptions&&(r.registry.dndOptions={DisableDND:!1}),Object.entries(n).forEach((function(e){var t=e[0],n=e[1];switch(t){case"disable":r.registry.dndOptions.DisableDND=n;break;case"hideSelectionBackground":r.registry.dndOptions.DisableSelectionHalo=n;break;case"icon":r.registry.dndOptions.CustomDndIcon=n;break;case"className":r.registry.dndOptions.ContainerClassName=n;break;case"droppableContainer":r.registry.dndOptions.getDroppableContainer=n;break;case"disableColumnLayout":r.registry.dndOptions.DisableGridDnd=n}})));break;case"Component":r.registry.Component=n}})),new o(r)}},function(e){e.exports=JSON.parse('{"name":"contentstack-app-framework-sdk","version":"1.0.0","types":"dist/src/index.d.ts","description":"This SDK helps connect to the development server of the Contentstack and sync the data.","main":"dist/index.js","scripts":{"build":"webpack","test":"echo \\"Error: no test specified\\" && exit 1","dev":"webpack --watch --mode development"},"keywords":[],"author":"Deepak Kharah","license":"MIT","devDependencies":{"@babel/core":"^7.2.2","@babel/preset-env":"^7.3.1","@types/post-robot":"^10.0.3","@types/react":"^17.0.18","babel-loader":"^8.0.5","css-loader":"^5.2.2","ts-loader":"^8.1.0","typescript":"^4.2.4","webpack":"^4.29.0","webpack-cli":"^3.2.1","webpack-dev-server":"^3.11.2"},"dependencies":{"post-robot":"8.0.29","wolfy87-eventemitter":"5.2.4"}}')}])}));
//# sourceMappingURL=index.js.map